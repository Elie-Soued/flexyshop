<div class="container py-5" style="min-height: 62vh">
  <div
    class="d-flex justify-content-between align-items-center py-4 border-bottom"
  >
    <h3 class="mb-0 fw-bold">Shopping Basket</h3>
    <div>
      <button
        type="button"
        class="btn"
        title="Checkout"
        style="border: none"
        (click)="closeCheckoutView()"
      >
        <fa-icon [icon]="close" class="fs-3"></fa-icon>
      </button>
    </div>
  </div>

  @if(cart.length){
  <div class="table-responsive mt-4" id="invoiceTable">
    <table class="table table-bordered align-middle text-center">
      <thead class="table-light">
        <tr>
          <th scope="col">Product</th>
          <th scope="col">Title</th>
          <th scope="col">Quantity</th>
          <th scope="col">Unit Price</th>
          <th scope="col">Total</th>
        </tr>
      </thead>
      <tbody>
        @for(item of cart; track item){
        <tr>
          <td>
            <img
              [src]="item.image"
              alt="{{ item.title }}"
              style="max-height: 80px"
            />
          </td>
          <td class="fw-semibold">{{ item.title }}</td>
          <td>{{ item.buyCount }}</td>
          <td>{{ item.price | currency : "EUR" }}</td>
          <td class="fw-bold">
            {{ item.price * item.buyCount | currency : "EUR" }}
          </td>
        </tr>
        }
      </tbody>
    </table>
  </div>

  <!-- Grand total -->
  <div class="text-end mt-3">
    <h4 class="fw-bold">
      Total:
      <span>{{ utilsService.getgrandTotal(cart) | currency : "EUR" }}</span>
    </h4>
  </div>

  <button
    class="btn btn-secondary"
    title="checkout"
    id="checkout"
    (click)="checkout()"
  >
    Proceed to checkout
  </button>
  }

  <!-- If cart is empty -->
  @else {
  <div class="text-center mt-5" id="emptyCart">
    <p class="text-muted fs-5">
      Your cart is empty :) Go do some shopping and come back!
    </p>
  </div>
  }
</div>
