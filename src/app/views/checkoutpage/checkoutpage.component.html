<div class="container py-5" style="min-height: 62vh">
  <div
    class="d-flex justify-content-between align-items-center py-4 border-bottom"
  >
    <h3 class="mb-0 fw-bold">Shopping Basket</h3>
    <div>
      <button
        type="button"
        class="btn"
        title="Checkout"
        style="border: none"
        (click)="closeCheckoutView()"
      >
        <fa-icon [icon]="close" class="fs-3"></fa-icon>
      </button>
    </div>
  </div>

  @if(cart.length){
  <div class="table-responsive mt-4" id="invoiceTable">
    <table class="table table-bordered align-middle text-center">
      <thead class="table-light">
        <tr>
          <th scope="col">Product</th>
          <th scope="col">Total</th>
          <th scope="col">Control</th>
        </tr>
      </thead>
      <tbody>
        @for(item of cart; track item){
        <tr>
          <td>
            <div>
              <img
                [src]="item.image"
                alt="{{ item.title }}"
                style="max-height: 80px"
              />
              <p class="fw-semibold">{{ item.buyCount }}</p>
              <p>{{ item.title }}</p>
              <p class="fw-semibold">
                {{ item.price | currency : "EUR" }}
              </p>
            </div>
          </td>

          <td class="fw-bold">
            {{ item.price * item.buyCount | currency : "EUR" }}
          </td>
          <td>
            <div class="d-flex flex-column flex-lg-row justify-content-around">
              <button type="button" class="btn" (click)="addItem(item)">
                <fa-icon [icon]="add" class="fs-4"></fa-icon>
              </button>
              <button
                type="button"
                class="btn"
                (click)="reduceItemBuyCount(item.id)"
              >
                <fa-icon [icon]="minus" class="fs-4"></fa-icon>
              </button>
              <button type="button" class="btn" (click)="removeItem(item.id)">
                <fa-icon [icon]="trash" class="fs-4"></fa-icon>
              </button>
            </div>
          </td>
        </tr>
        }
      </tbody>
    </table>
  </div>

  <!-- Grand total -->
  <div class="mt-3">
    <h5 class="fw-bold">
      Total:
      <span>{{ utilsService.getgrandTotal(cart) | currency : "EUR" }}</span>
    </h5>
    <button
      class="btn btn-dark"
      title="checkout"
      id="checkout"
      (click)="checkout()"
    >
      Proceed to checkout
    </button>
  </div>

  }

  <!-- If cart is empty -->
  @else {
  <div class="text-center mt-5" id="emptyCart">
    <p class="text-muted fs-5">
      Your cart is empty :) Go do some shopping and come back!
    </p>
  </div>
  }
</div>
